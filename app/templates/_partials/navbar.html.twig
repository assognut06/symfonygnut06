<header class="sticky-top">
    <nav class="navbar navbar-expand-xl navbar-dark bg-navbar" role="navigation" aria-label="Navigation principale">
        <div class="container-fluid">
            <!-- Logo -->
            <a class="navbar-brand logoNavbar" href="{{ path('app_home') }}" aria-label="Accueil GNUT 06">
                GNUT 06
            </a>

            <!-- Burger menu -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown"
                    aria-expanded="false" aria-label="Ouvrir le menu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Menu -->
            <div class="collapse navbar-collapse fs-5" id="navbarNavDropdown">
                <ul class="navbar-nav ms-auto mb-2 mb-xl-0 text-navbar w-100 justify-content-xl-evenly">

                    <li class="nav-item">
                        <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_a_propos' ? 'active' : '' }}"
                           href="{{ path('app_a_propos') }}"
                                {% if app.request.attributes.get('_route') == 'app_a_propos' %} aria-current="page"{% endif %}>
                            Notre Mission
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_billetteries' ? 'active' : '' }}"
                           href="{{ path('app_billetteries') }}"
                                {% if app.request.attributes.get('_route') == 'app_billetteries' %} aria-current="page"{% endif %}>
                            R√©server une activit√©
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_metavers' ? 'active' : '' }}"
                           href="{{ path('app_metavers') }}"
                                {% if app.request.attributes.get('_route') == 'app_metavers' %} aria-current="page"{% endif %}>
                            Salles 3D immersives
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_digital_consulting' ? 'active' : '' }}"
                           href="{{ path('app_digital_consulting') }}"
                                {% if app.request.attributes.get('_route') == 'app_digital_consulting' %} aria-current="page"{% endif %}>
                            Digital Consulting
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_don' ? 'active' : '' }}"
                           href="{{ path('app_don') }}"
                                {% if app.request.attributes.get('_route') == 'app_don' %} aria-current="page"{% endif %}>
                            Nous Soutenir
                        </a>
                    </li>

                    {% if app.user %}

                        <!-- üñ•Ô∏è Desktop : menu d√©roulant Profil -->
                        <li class="nav-item dropdown d-none d-xl-block">
                            <a class="nav-link dropdown-toggle text-light {{ app.request.attributes.get('_route') starts with 'app_profil' ? 'active' : '' }}"
                               href="#"
                               id="navbarProfilDropdown"
                               role="button"
                               data-bs-toggle="dropdown"
                               aria-expanded="false">
                                <img src="{{ asset('../images/webp/person-circle.svg') }}" alt="icone profil">
                                Profil
                            </a>
                            <ul class="dropdown-menu dropdown-menu-end bg-navbar border-0" aria-labelledby="navbarProfilDropdown">
                                <li>
                                    <a class="dropdown-item text-light" href="{{ path('app_profil') }}">Tableau de bord</a>
                                </li>
                                {% if is_granted('ROLE_ADMIN') %}
                                    <li>
                                        <a class="dropdown-item text-light" href="{{ path('admin_dashboard') }}">Administration</a>
                                    </li>
                                {% endif %}
                                <li><hr class="dropdown-divider text-light"></li>
                                <li>
                                    <a class="dropdown-item text-light" href="{{ path('app_logout') }}">D√©connexion</a>
                                </li>
                            </ul>
                        </li>

                        <!-- üì± Mobile : liens simples √† la suite -->
                        <li class="nav-item d-block d-xl-none">
                            <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'app_profil' ? 'active' : '' }}"
                               href="{{ path('app_profil') }}">
                                Tableau de bord
                            </a>
                        </li>

                        {% if is_granted('ROLE_ADMIN') %}
                            <li class="nav-item d-block d-xl-none">
                                <a class="nav-link text-light {{ app.request.attributes.get('_route') == 'admin_dashboard' ? 'active' : '' }}"
                                   href="{{ path('admin_dashboard') }}">
                                    Administration
                                </a>
                            </li>
                        {% endif %}

                        <li class="nav-item d-block d-xl-none">
                            <a class="nav-link text-light" href="{{ path('app_logout') }}">D√©connexion</a>
                        </li>

                    {% else %}
                        <li class="nav-item d-flex flex-column flex-xl-row gap-2 mt-2 mt-xl-0">
                            <a href="{{ path('app_register') }}"
                               class="btn-outline-gradient btn-sm text-white {{ app.request.attributes.get('_route') == 'app_register' ? ' active' }}"
                                    {% if app.request.attributes.get('_route') == 'app_register' %} aria-current="page"{% endif %}>
                                Inscription
                            </a>
                            <a href="{{ path('app_login') }}"
                               class="btn-neon btn-sm text-white {{ app.request.attributes.get('_route') == 'app_login' ? ' active' }}"
                                    {% if app.request.attributes.get('_route') == 'app_login' %} aria-current="page"{% endif %}>
                                Connexion
                            </a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
</header>

<style>
    /* Optionnel : harmonisation visuelle du menu dropdown */
    .dropdown-menu.bg-navbar {
        background-color: #121212;
    }
    .dropdown-menu .dropdown-item:hover {
        background-color: rgba(255,255,255,0.1);
    }
    .dropdown-divider {
        border-color: rgba(255,255,255,0.1);
    }
</style>
