<!-- Image flottante cliquable -->
<img src="{{ asset('images/agent_ai2.png') }}" alt="Aide IA"
     id="openChat"
     style="width: 90px; height: 90px; z-index: 1050; border-radius: 40%; cursor: pointer; border:1px solid  #90cff6; background-color:rgb(255, 255, 255);"
     class="shadow-lg position-fixed bottom-0 end-0 m-4 floating-icon">



<!-- Bulle de chat moderne -->
<div class="card chat-box position-fixed bottom-0 end-0 m-3 d-none shadow-lg rounded-4" id="chatBox" style="width: 340px; height:550px; z-index: 1051; background: #ffffff;border:1px #90cff6;">
<div class="card-header text-white d-flex justify-content-between align-items-center rounded-top-4 px-4 py-3"
     style="background-image: linear-gradient(135deg, #4a90e2,rgb(140, 0, 255));">
    <span class="fw-semibold fs-5">Agent IA</span>
    <button class="btn btn-sm btn-light rounded-circle d-flex align-items-center justify-content-center" id="closeChat" style="width: 28px; height: 28px;" aria-label="Fermer">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="card-body" style="height: 300px;width: 350px;">
    <iframe src="https://copilotstudio.microsoft.com/environments/Default-eab983d4-f55b-4a97-a9ba-de1d467df8de/bots/cr9f3_agentHandicap/webchat?__version__=2" frameborder="0" style="width: 100%; height: 440px;"></iframe>
  </div>
</div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const openBtn = document.getElementById('openChat');
    const chatBox = document.getElementById('chatBox');
    const closeBtn = document.getElementById('closeChat');

    openBtn.addEventListener('click', () => {
      chatBox.classList.remove('d-none');
      openBtn.classList.add('d-none');
    });

    closeBtn.addEventListener('click', () => {
      chatBox.classList.add('d-none');
      openBtn.classList.remove('d-none');
    });

    // Vibration toutes les 30 secondes pendant 3 secondes
    setInterval(() => {
      openBtn.classList.add('vibrate');
      setTimeout(() => {
        openBtn.classList.remove('vibrate');
      }, 4000);
    }, 10000);
  });
</script>

</script>
<style>
    /* agent ai */
    /*mouvement haut et bas*/
    @keyframes float {
      0%   { transform: translateY(0); }
      50%  { transform: translateY(-6px); }
      100% { transform: translateY(0); }
    }

    .floating-icon {
      animation: float 2.5s ease-in-out infinite;
      transition: transform 0.3s ease;
    }

    .floating-icon:hover {
      transform: scale(1.1);
      animation-play-state: paused; /* Optionnel : arrÃªte la flotte pendant le hover */
    }

    /*vibration*/
    @keyframes shakeX {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    .floating-icon.vibrate {
      animation: shakeX 0.6s ease-in-out;
    }
      </style>