{% extends 'base.html.twig' %}

{% block title %}Associations √† recommander
{% endblock %}

{% block body %}
<style>
/* üé® Effet de relief sur les cartes - Cartes blanches sur fond sombre */
.card-relief {
    position: relative;
    border: none;
    border-radius: 15px;
    /* ‚úÖ Fond blanc pour les cartes */
    background: linear-gradient(145deg, #ffffff, #f8f9fa);
    box-shadow: 
        /* Ombres externes pour l'effet relief sur fond sombre */
        20px 20px 40px rgba(0, 0, 0, 0.8),
        -10px -10px 30px rgba(255, 255, 255, 0.1),
        /* Ombres internes subtiles */
        inset 3px 3px 8px rgba(0, 0, 0, 0.1),
        inset -3px -3px 8px rgba(255, 255, 255, 0.8);
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    transform: translateZ(0);
    /* ‚úÖ Bordure subtile avec votre couleur th√®me */
    border: 1px solid rgba(248, 108, 248, 0.2);
}

/* üåü Effet hover avec relief plus prononc√© */
.card-relief:hover {
    transform: translateY(-10px) scale(1.03);
    box-shadow: 
        /* Ombres plus intenses au hover */
        30px 30px 60px rgba(0, 0, 0, 0.9),
        -15px -15px 40px rgba(255, 255, 255, 0.15),
        inset 5px 5px 12px rgba(0, 0, 0, 0.12),
        inset -5px -5px 12px rgba(255, 255, 255, 0.9);
    /* ‚úÖ Bordure color√©e au hover */
    border: 1px solid rgba(248, 108, 248, 0.5);
    /* ‚úÖ Effet de lueur */
    filter: drop-shadow(0 0 20px rgba(248, 108, 248, 0.3));
}
</style>
	<div class="container pt-0">
		<div class="mx-3">
			<h2 class="my-3 gradient-text text-center">Associations √† recommander
				{% if app.request.attributes.get('_route') == 'app_asso_recommander_ville' %}
					√†
					{{ city }}
				{% endif %}
			</h2>
			<div class="row justify-content-center">
				<div class="col-md-6">
					<form method="GET" action="{{ path('app_asso_recommander_search') }}" class="mt-2">
						<div class="mb-3">
							<input type="text" name="query" class="form-control" placeholder="Rechercher une association">
						</div>
						<div class="d-grid">
							<button type="submit" class="btn-neon text mt-3" role="button">Rechercher</button>
						</div>
					</form>
				</div>
				{% if app.request.attributes.get('_route') == 'app_asso_recommander_search' %}
					<div class="col-12 mt-3 text-center">
						<a href="{{ path('app_asso_recommander') }}" class="btn btn-outline-success">Retour</a>
					</div>
				{% endif %}
			</div>

			{% if assos is defined %}
				<ul>
					{% for asso in assos %}
						<li>{{ asso.name }}</li>
					{% endfor %}
				</ul>
			{% endif %}
			<div class="border border-secondary mb-5 mx-5 mt-4"></div>
			<div class="row align-items-start mx-auto">
				{% for item in data_forms %}
					<div class="col d-flex justify-content-around my-3">
						<div class="card shadow-lg card-relief" style="width: 21rem;">
							<img src="{{ item.banner }}" class="card-img-top" alt="Banni√®re {{ item.name }}">
							<div class="card-body">
								<h5 class="card-title text-center text-primary">{{ item.name }}</h5>
								<div class="card-text text-center">
									<img class="card-img-top logoAsso my-2" src="{{ item.logo }}" alt="Logo de l'association {{ item.name }}"/>
									<br>
									<p>{{ item.category }}</p>
									<p class="text-justify">{{ item.description|slice(0, 200) }}...<br>
										<a class="icon-link icon-link-hover" href="{{ path('app_asso_recommander_fiche', {'organizationSlug': item.organizationSlug}) }}">
											En savoir +<i class="bi bi-arrow-right" aria-hidden="true"><use xlink:href="#arrow-right"></use></i>
										</a>
									</p>
									<p>
										{% if getEventsAssoRecommender(item.organizationSlug, "Event") == 0 %}
											Aucun √©v√©nement √† venir
										{% else %}
											<a href="{{ path('app_asso_evenements', {'organizationSlug': item.organizationSlug,'organizationName': item.name|url_encode}) }}">{{ getEventsAssoRecommender(item.organizationSlug, "Event") }}
												√©v√®nement(s) √† venir</a>
										{% endif %}
									</p>
									{% if getEventsAssoRecommender(item.organizationSlug, "Donation") != 0 %}
										<p>
											<a href="{{ path('app_asso_evenements', {'organizationSlug': item.organizationSlug,'organizationName': item.name|url_encode, 'formTypes': 'Donation'}) }}">{{ getEventsAssoRecommender(item.organizationSlug, "Donation") }}
												formulaire(s) de dons</a>
										</p>
									{% endif %}
									{% if getEventsAssoRecommender(item.organizationSlug, "Membership") != 0 %}
										<p>
											<a href="{{ path('app_asso_evenements', {'organizationSlug': item.organizationSlug,'organizationName': item.name|url_encode,'formTypes': 'Membership'}) }}">{{ getEventsAssoRecommender(item.organizationSlug, "Membership") }}
												formulaire(s) d'adh√©sion</a>
										</p>
									{% endif %}
									{% if getEventsAssoRecommender(item.organizationSlug, "CrowdFunding") != 0 %}
										<p>
											<a href="{{ path('app_asso_evenements', {'organizationSlug': item.organizationSlug,'organizationName': item.name|url_encode,'formTypes': 'CrowdFunding'}) }}">{{ getEventsAssoRecommender(item.organizationSlug, "CrowdFunding") }}
												formulaire(s) d'appel √† projet</a>
										</p>
									{% endif %}
									{% if getEventsAssoRecommender(item.organizationSlug, "Shop") != 0 %}
										<p>
											<a href="{{ path('app_asso_evenements', {'organizationSlug': item.organizationSlug,'organizationName': item.name|url_encode,'formTypes': 'Shop'}) }}">{{ getEventsAssoRecommender(item.organizationSlug, "Shop") }}
												boutique(s)</a>
										</p>
									{% endif %}
									<p>{{ item.zipCode }}
										{{ item.city }}</p>
									<a class="btn-asso" role="button" href="{{ item.url }}" target='_blanck'>Sur HelloAsso</a>
								</div>
							</div>
						</div>
					</div>
				{% else %}
					<p class="text">Si vous ne trouvez pas d'association dans la base de donn√©es, il est possible que l'association n'ait pas √©t√© enregistr√©e correctement ou qu'elle n'ait pas mis √† jour ses informations r√©cemment.</p>
				{% endfor %}
				<div class="col-12 pagination-container mt-3">
					<nav aria-label="Admin navigation">
						<ul class="pagination">
							{% if page > 1 %}
								<li class="page-item">
									<a class="page-link" href="{{ path(app.request.attributes.get('_route') ,{'page': page - 1, 'city': city is defined ? city : null}) }}">
										<span aria-hidden="true">&laquo;</span>
									</a>
								</li>
							{% endif %}

							{% for page in 1..pages %}
								<li class="page-item{% if app.request.attributes.get('page') == page %} active{% endif %}">
									<a class="page-link" href="{{ path(app.request.attributes.get('_route') ,{'page': page, 'city': city is defined ? city : null}) }}">{{ page }}</a>
								</li>
							{% endfor %}

							{% if page < pages %}
								<li class="page-item">
									<a class="page-link" href="{{ path(app.request.attributes.get('_route') ,{'page': page + 1, 'city': city is defined ? city : null}) }}">
										<span aria-hidden="true">&raquo;</span>
									</a>
								</li>
							{% endif %}
						</ul>
					</nav>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
